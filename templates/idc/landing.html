{% extends 'base.html' %}
{% load humanize %}
{% load static %}

{% comment %}

   Copyright 2020, Institute for Systems Biology

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

{% endcomment %}

{% block header %}{% endblock %}
{% block link_page_name %}landing{% endblock %}
{% block page_name %}landing{% endblock %}
{% block body_class %}landing{% endblock %}
{% block content %}
    <div class="landing-content-div short-inner-content container-fluid">
        <div class="banner-section row">
            <div class="alert alert-dismissible show" role="alert">
                <div class="row ">
                    <div class="col-xs-1"></div>
                    <div class="col-xs-10">
                        <b>IDC Community Office Hours open to all every Tuesday 16:30 â€“ 17:30 (New York) and
                           Wednesday 10:30-11:30 (New York) via Google Meet at
                            <a class="external-link" href="" url="https://meet.google.com/xyt-vody-tvb"
                               data-toggle="modal" data-target="#external-web-warning">
                                https://meet.google.com/xyt-vody-tvb
                            </a></b>.
                    </div>
                    <div class="col-xs-1">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="buttons row">
            <div class="container-fluid">
            <div class="col-lg-12 col-md-12 col-sm-12 buttons-col">
                <a class="btn btn-explore" href="{% url 'explore_data' %}"><span><i class="fa-solid fa-eye"></i></span> Explore Images</a>
            </div>
            </div>
        </div>
        <div class="features row">
            <div class="container-fluid">
            <div class="images-col">
                <div id="modality-carousel" class="carousel slide modality" data-ride="carousel">

                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target="#modality-carousel" title="Computed Tomopgrahy" data-slide-to="0" class="active"></li>
                        <li data-target="#modality-carousel" title="Magnetic Resonance" data-slide-to="1"></li>
                        <li data-target="#modality-carousel" title="Positron Emission Tomography" data-slide-to="2"></li>
                        <li data-target="#modality-carousel" title="Slide Microscopy - Brightfield" data-slide-to="3"></li>
                        <li data-target="#modality-carousel" title="Slide Microscopy (SM) + region annotations" data-slide-to="4"></li>
                        <li data-target="#modality-carousel" title="Slide Microscopy - Fluorescence" data-slide-to="5"></li>
                    </ol>
                    <div class="pause-resume">
                        <span class="pause-carousel" title="Pause images"><i class="fa-solid fa-pause-circle"></i></span>
                        <span class="play-carousel" title="Resume images" style="display: none;"><i class="fa-solid fa-play-circle"></i></span>
                    </div>
                    <!-- Content -->
                    <div class="carousel-inner" role="listbox">

                        <!-- CT Example -->
                        <div class="item active">
                            <div>
                            <a href="{{ OHIF_V3_PATH }}1.2.840.113654.2.55.192012426995727721871016249335309434385?SeriesInstanceUID=1.2.840.113654.2.55.305538394446738410906709753576946604022,1.2.276.0.7230010.3.1.3.313263360.15787.1706310178.804490"
                               target="_blank" rel="noopener noreferrer" title="Click to see in IDC Viewer">
                            <img data-study-id="1.2.840.113654.2.55.192012426995727721871016249335309434385" src="{% static 'img/ct_ex.jpg' %}" alt="CT Example Image">
                            </a>
                            </div>
                            <div class="carousel-caption">
                                <h3>Computed Tomography (CT) + Segmentations</h3>
                            </div>
                        </div>

                        <!-- MR Example -->
                        <div class="item">
                            <a href="{{ OHIF_V2_PATH }}1.3.6.1.4.1.14519.5.2.1.7311.5101.170561193612723093192571245493?seriesInstanceUID=1.3.6.1.4.1.14519.5.2.1.7311.5101.206828891270520544417996275680,1.2.276.0.7230010.3.1.3.1070885483.15960.1599120307.701"
                               target="_blank" rel="noopener noreferrer" title="Click to see in IDC Viewer">
                            <img src="{% static 'img/mr_ex.jpg' %}" data-study-id="1.3.6.1.4.1.14519.5.2.1.7311.5101.170561193612723093192571245493" alt="MR Example Image">
                            </a>
                            <div class="carousel-caption">
                                <h3>Magnetic Resonance (MR)</h3>
                            </div>
                        </div>

                        <!-- PET Example -->
                        <div class="item">
                            <a href="{{ OHIF_V2_PATH }}1.3.6.1.4.1.14519.5.2.1.5168.1900.259520120774497994844579066293?seriesInstanceUID=1.3.6.1.4.1.14519.5.2.1.5168.1900.379274847602196071565482395253,1.3.6.1.4.1.14519.5.2.1.5168.1900.924189791316990444955278117416,1.3.6.1.4.1.14519.5.2.1.5168.1900.308784784152451259100701859682,1.3.6.1.4.1.14519.5.2.1.5168.1900.924189791316990444955278117416,1.3.6.1.4.1.14519.5.2.1.5168.1900.379274847602196071565482395253,1.3.6.1.4.1.14519.5.2.1.5168.1900.308784784152451259100701859682"
                               target="_blank" rel="noopener noreferrer" title="Click to see in IDC Viewer">
                            <img src="{% static 'img/pet_ex.jpg' %}" data-study-id="1.3.6.1.4.1.14519.5.2.1.5168.1900.259520120774497994844579066293" alt="PET Example Image">
                            </a>
                            <div class="carousel-caption">
                                <h3>Positron Emission Tomography (PET)</h3>
                            </div>
                        </div>

                        <!-- SM Example -->
                        <div class="item">
                            <a href="{{ SLIM_VIEWER_PATH }}2.25.211094631316408413440371843585977094852/series/1.3.6.1.4.1.5962.99.1.208792987.352384958.1640886332827.2.0"
                               target="_blank" rel="noopener noreferrer" title="Click to see in IDC SliM Viewer">
                            <img src="{% static 'img/path_ex.jpg' %}" data-study-id="2.25.211094631316408413440371843585977094852" alt="SM Example Image - Brightfield">
                            </a>
                            <div class="carousel-caption">
                                <h3>Slide Microscopy (SM) - Brightfield</h3>
                            </div>
                        </div>

                        <!-- SM+SR Example -->
                        <div class="item">
                            <a href="{{ SLIM_VIEWER_PATH }}2.25.305861166770867957232782722915281633696/series/1.3.6.1.4.1.5962.99.1.2194043801.1599740594.1685821256601.4.0"
                               target="_blank" rel="noopener noreferrer" title="Click to see in IDC SliM Viewer">
                            <img src="{% static 'img/sm_sr_ex.jpg' %}" data-study-id="2.25.305861166770867957232782722915281633696" alt="SM Example Image - Region Annotations">
                            </a>
                            <div class="carousel-caption">
                                <h3>Slide Microscopy (SM) + Region Annotations</h3>
                            </div>
                        </div>

                        <!-- HTAN Example -->
                        <div class="item">
                            <a href="{{ SLIM_VIEWER_PATH }}2.25.93749216439228361118017742627453453196/series/1.3.6.1.4.1.5962.99.1.2344794501.795090168.1655907236229.4.0?state=1.2.826.0.1.3680043.10.511.3.79630386778396943986328353882008803"
                               target="_blank" rel="noopener noreferrer" title="Click to see in IDC SliM Viewer">
                            <img src="{% static 'img/sm_bf_ex.jpg' %}" data-study-id="2.25.93749216439228361118017742627453453196" alt="SM Example Image - Fluorescence">
                            </a>
                            <div class="carousel-caption">
                                <h3>Slide Microscopy (SM) - Fluorescence</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Previous/Next controls -->
                    <a class="left carousel-control" href="#modality-carousel" role="button" data-slide="prev">
                        <span class="icon-prev" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#modality-carousel" role="button" data-slide="next">
                        <span class="icon-next" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>

            </div>
            <div class="col-lg-6 col-sm-12 sapiens">
                <div class="sapiens-heading"><h4>Cases by Major Primary Site</h4></div>
                <div id="human-body-root"></div>
            </div>
            </div>
        </div>
    </div>
    <div class="landing-bottom row">
        <div class="summary row">
            <div class="col-lg-4 col-md-12 col-sm-12">
                <div class="summary-header panel-body">
                    <span><b>Data Portal Summary</b></span>
                    <span>Data Release {{ idc_info.version_number }} {{ idc_info.date_active|date:"F d, Y" }}</span>
                </div>
            </div>
            <div class="summary col-lg-8 col-md-12 col-sm-12">
                <div class="summary-contents panel-body">
                    <div class="summary-block col-lg-3 col-md-3 col-sm-3"><div class="img-container"><img src="{% static 'img/collex_icon_2.png' %}" alt="" /></div> <div>{{ idc_info.collex_count|intcomma }}<br/> Collections</div></div>
                    <div class="summary-block col-lg-3 col-md-3 col-sm-3"><div class="img-container"><img src="{% static 'img/cases_icon.png' %}" alt="" /></div> <div>{{ idc_info.case_count|intcomma }}<br/> Cases</div></div>
                    <div class="summary-block col-lg-3 col-md-3 col-sm-3"><div class="img-container"><img src="{% static 'img/volume_icon.png' %}" alt="" /></div> <div>{{ idc_info.data_volume }} TB<br/> Data Volume</div></div>
                    <div class="summary-block col-lg-3 col-md-3 col-sm-3"><div class="img-container"><img src="{% static 'img/img_series_icon.png' %}" alt="" /></div> <div>{{ idc_info.series_count|intcomma }}<br/> Image Series</div></div>
                </div>
            </div>
        </div>
        {% include 'share/site_footer.html'  %}
    </div>
{% endblock %}

{% block js_file %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'js/landing.js' %}?v={{ APP_VERSION }}"></script>
    <script>
    var case_counts = {{ case_counts|safe }};
    var ex_tooltips = {{ example_tooltips|safe }};
    var showWarning = true;
    </script>
{% endblock %}
