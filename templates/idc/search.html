{% extends 'base.html' %}
{% load staticfiles %}

{% comment %}

   Copyright 2015, Institute for Systems Biology

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

{% endcomment %}

{% block header %}

    <script type="text/javascript"  src="{% static 'js/sample_cohort.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/image_search.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/libs/plotly-latest.min.js' %}"></script>

  <style>
       table, th, td {border: 1px solid black;}
       tr.selected_grey td {background-color: #333; color: #fff;}
    </style>
    <script>
         $(".text_head").on("click", function() {
        /*var tr = $(this).parent();
        if(tr.hasClass("selected_grey")) {
            tr.removeClass("selected_grey");
        } else {
          tr.addClass("selected_grey");
       } */
        //alert('tmp');

});


    </script>

    <style>
        .iframe-container {
       overflow: hidden;
       // Calculated from the aspect ration of the content (in case of 16:9 it is 9/16= 0.5625)
       padding-top: 56.25%;
       position: relative;
       }

      .iframe-container iframe {
       border: 0;
       height: 100px;
        left: 0;
        position: absolute;
        top: 0;
         width: 100%;
      }

    </style>
    <script>

    window.onload = function(){
        fetchData();

    }
    </script>

{% endblock %}

{% block link_page_name %}help{% endblock %}
{% block page_name %}help{% endblock %}

{% block content %}

    <div class="row">
    <div class="col-lg-3">

        <p><h3>Search Scope:</h3>
        <select id="project_scope" onchange="updateSearchScope(this)">
        <option value="All" >All data</option>
        </select>

    </p>

    </div>

    <div class="col-lg-9">

        <p><h3>Search Definition:</h3>
            <ul>
                <li id="qproj"><h4>Project: <text id="selected_project">All</text></h4></li>
           <li>Original:</li>
                <ul>
                    <li id="modality_set">&emsp;&emsp;Modality: All</li>
                    <li id="body_part_examined_set">&emsp;&emsp;Body Part Examined: All</li>
                </ul>
           <li>Derived:</li>
           <li>Related:</li>
                <ul>
                    <li id="disease_code_set">&emsp;&emsp;Disease Code: All</li>
                    <li id="vital_status_set">&emsp;&emsp;Vital Status: All</li>
                    <li id="gender_set">&emsp;&emsp;Gender: All</li>
                    <li id="age_set">&emsp;&emsp;Age: All</li>
                    <li id="bmi_set">&emsp;&emsp;BMI: All</li>
                    <li id="race_set">&emsp;&emsp;Race: All</li>
                    <li id="ethnicity_set">&emsp;&emsp;Ethnicity: All</li>
                </ul>
           </ul>

    </p>

    </div>
    </div>

    <div class ="row">
    <div class="col-lg-3">



        <div><h3>Search Configuration</h3></div>
        <div id = "search_orig" class="col-lg-1" onclick="toggleSearch(0,'search')" style="display:inline-block;width:32%;border: thin solid black;background-color:dodgerblue"><h3>Original</h3></div>
        <div id = "search_derived" class="col-lg-1" onclick="toggleSearch(1,'search')" style="display:inline-block;width:32%;border: thin solid black;"><h3>Derived</h3></div>
        <div id = "search_related" class="col-lg-1" onclick="toggleSearch(2,'search')" style="display:inline-block;width:32%;border: thin solid black;"><h3>Related</h3></div>

        <div align="left"; style="width:97%;display:inline-block;border: thin solid black;float:none">
            <div id = "search_orig_set" align="left" style="display:inline-block;">
                <div id="modality_heading">
                    <a role="button" data-toggle="collapse"  href="#modality" aria-expanded="false" aria-controls="modality">
                   <i class="fa fa-caret-right"></i> Modality</a>
                </div>
               <div id="modality" class="collapse">
                <ul style="list-style: none;">
                <li>&emsp;<input type="checkbox" checked value="ct" onclick="updateFilterSelection('modality', 'modality_set','Modality','Modality',0,false)">Computed Tomography(CT)</li>
                    <li>&emsp;<input type="checkbox" checked value="ctpt" onclick="updateFilterSelection('modality', 'modality_set','Modality',0,false)">??(CTPT)</li>
                    <li>&emsp;<input type="checkbox" checked value="cr" onclick="updateFilterSelection('modality', 'modality_set','Modality',0,false)">Computed Radiology(CR)</li>
                <li>&emsp;<input type="checkbox" checked value="mr" onclick="updateFilterSelection('modality', 'modality_set','Modality',0,false)">Magnetic Resonance(MR)</li>
                    <li>&emsp;<input type="checkbox" checked value="mg" onclick="updateFilterSelection('modality', 'modality_set','Modality',0,false)">Mamography(MG)</li>
                    <li>&emsp;<input type="checkbox" checked value="nm" onclick="updateFilterSelection('modality', 'modality_set','Modality',0,false)">Nuclear Medicine(NM)</li>
                    <li>&emsp;<input type="checkbox" checked value="rtplan" onclick="updateFilterSelection('modality', 'modality_set','Modality',0,false)">Radiotherapy Plan(RTPLAN)</li>
                    <li>&emsp;<input type="checkbox" checked value="rtstruct" onclick="updateFilterSelection('modality', 'modality_set','Modality',0,false)">Radiotheraoy Structure Set(RTSTRUCT)</li>

                 </ul>
                </div>

                <div id="body_heading">
                    <a role="button" data-toggle="collapse"  href="#body_part" aria-expanded="true" aria-controls="body_part" class="">
                   <i class="fa fa-caret-right"></i> Body Part Examined
                    </a>
                </div>

                <div id="body_part" class="collapse">
                    <ul style="list-style: none;">
                    <li>&emsp;<input type="checkbox" checked value="bladder" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Bladder</li>
                    <li>&emsp;<input type="checkbox" checked value="brain" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Brain </li>
                    <li>&emsp;<input type="checkbox" checked value="colon" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Colon</li>
                    <li>&emsp;<input type="checkbox" checked value="headneck" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Head/Neck</li>
                        <li>&emsp;<input type="checkbox" checked value="kidney" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Kidney</li>
                    <li>&emsp;<input type="checkbox" checked value="prostate" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Prostate</li>
                    <li>&emsp;<input type="checkbox" checked value="thyroid" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Thyroid</li>
                    <li>&emsp;<input type="checkbox" checked value="none" onclick="updateFilterSelection('body_part', 'body_part_examined_set','Body Part Examined','BodyPartExamined',true,false)">Not Available/Other</li>


                   </ul>
                </div>
            </div>



            <div id = "search_derived_set" align="left" style="display:none;">
               <div id="segmentation_heading">
                    <a role="button" data-toggle="collapse"  href="#segmentation" aria-expanded="false" aria-controls="segmentation" class="">
                   <i class="fa fa-caret-right"></i> Segmentation</a>
                </div>
                <div id="segmentation" class="collapse">
                    <ul style="list-style: none;">
                        <li>&emsp;<input type="checkbox" checked value="yes">&emsp;Segmentation Available</li>
                        <li>&emsp;<input type="checkbox" checked value="no">&emsp;Segmentation Not Available</li>
                    </ul>
                </div>

            </div>

            <div id = "search_related_set" align="left" style="display:none;">
                <div id="disease_heading" class="list-group-item__heading">
                    <a role="button" data-toggle="collapse"  href="#disease" aria-expanded="false" aria-controls="disease">
                        <i class="fa fa-caret-right"></i> Disease Code</a>
                </div>

                <div id="disease" class="collapse">
                    <ul id="disease_list" style="list-style: none;">


                    </ul>
                </div>


                <div id="vital_heading" class="list-group-item__heading">
                    <a role="button" data-toggle="collapse"  href="#vital" aria-expanded="false" aria-controls="vital">
                        <i class="fa fa-caret-right"></i> Vital Statistics</a>
                </div>

                <div id="vital" class="collapse">
                    <ul id="vital_list" style="list-style: none;">
                         <li>&emsp;<input type="checkbox" checked value="alive" onclick="updateFilterSelection('vital_list', 'vital_status_set','Vital Status','vital_status',false,false)">Alive</li>
                        <li>&emsp;<input type="checkbox" checked value="dead" onclick="updateFilterSelection('vital_list', 'vital_status_set','Vital Status','vital_status',false,false)">Dead</li>
                        <li>&emsp;<input type="checkbox" checked value="none" onclick="updateFilterSelection('vital_list', 'vital_status_set','Vital Status','vital_status',false,false)">NA</li>
                    </ul>
                </div>

                <div id="gender_heading" class="list-group-item__heading">
                    <a role="button" data-toggle="collapse"  href="#gender" aria-expanded="false" aria-controls="vital">
                        <i class="fa fa-caret-right"></i>Gender</a>
                </div>

                <div id="gender" class="collapse">
                    <ul id="gender_list" style="list-style: none;">
                         <li>&emsp;<input type="checkbox" checked value="male" onclick="updateFilterSelection('gender_list', 'gender_set','Gender','gender',false,false)">Male</li>
                        <li>&emsp;<input type="checkbox" checked value="female" onclick="updateFilterSelection('gender_list', 'gender_set','Gender','gender',false,false)">Female</li>
                        <li>&emsp;<input type="checkbox" checked value="none" onclick="updateFilterSelection('gender_list', 'gender_set','Gender','gender',false,false)">NA</li>
                    </ul>
                </div>

               <div id="age_heading" class="list-group-item__heading">
                    <a role="button" data-toggle="collapse"  href="#age" aria-expanded="false" aria-controls="age">
                        <i class="fa fa-caret-right"></i>Age</a>
                </div>

                <div id="age" class="collapse">
                    <ul id="age_list" style="list-style: none;">
                         <li>&emsp;<input type="checkbox" checked value="0,20" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">0-19</li>
                        <li>&emsp;<input type="checkbox" checked value="20,30" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">20-29</li>
                        <li>&emsp;<input type="checkbox" checked value="30,40" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">30-39</li>
                        <li>&emsp;<input type="checkbox" checked value="40,50" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">40-49</li>
                        <li>&emsp;<input type="checkbox" checked value="50,60" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">50-59</li>
                        <li>&emsp;<input type="checkbox" checked value="60,70" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">60-69</li>
                        <li>&emsp;<input type="checkbox" checked value="70,80" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">70-79</li>
                        <li>&emsp;<input type="checkbox" checked value="80" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">80 or Over</li>
                        <li>&emsp;<input type="checkbox" checked value="none" onclick="updateFilterSelection('age_list', 'age_set','Age','age',false,true)">NA</li>
                    </ul>
                </div>

                <div id="bmi_heading" class="list-group-item__heading">
                    <a role="button" data-toggle="collapse"  href="#bmi" aria-expanded="false" aria-controls="bmi">
                        <i class="fa fa-caret-right"></i>BMI</a>
                </div>

                <div id="bmi" class="collapse">
                    <ul id="bmi_list" style="list-style: none;">
                         <li>&emsp;<input type="checkbox" checked value="0,18.5" onclick="updateFilterSelection('bmi_list', 'bmi_set','BMI','bmi',false,true)">Underweight: BMI less than 18.5</li>
                        <li>&emsp;<input type="checkbox" checked value="18.5,25" onclick="updateFilterSelection('bmi_list', 'bmi_set','BMI','bmi',false,true)">Normal weight: BMI greater than or equal to 18.5 and less than 25</li>
                        <li>&emsp;<input type="checkbox" checked value="25,30" onclick="updateFilterSelection('bmi_list', 'bmi_set','BMI','bmi',false,true)">Overweight: BMI greater than 25 and less than 30</li>
                        <li>&emsp;<input type="checkbox" checked value="30" onclick="updateFilterSelection('bmi_list', 'bmi_set','BMI','bmi',false,true)">Obese: BMI greater than 30</li>

                        <li>&emsp;<input type="checkbox" checked value="none">NA</li>
                    </ul>
                </div>

                <div id="race_heading" class="list-group-item__heading">
                    <a role="button" data-toggle="collapse"  href="#race" aria-expanded="false" aria-controls="race">
                        <i class="fa fa-caret-right"></i>Race</a>
                </div>

                <div id="race" class="collapse">
                    <ul id="race_list" style="list-style: none;">
                    </ul>
                </div>

               <div id="ethnicity_heading" class="list-group-item__heading">
                    <a role="button" data-toggle="collapse"  href="#ethnicity" aria-expanded="false" aria-controls="ethnicity">
                        <i class="fa fa-caret-right"></i>Ethnicity</a>
                </div>

                <div id="ethnicity" class="collapse">
                    <ul id="ethnicity_list" style="list-style: none;">

                    </ul>
                </div>



            </div>

        </div>


    </div>
    <div class="col-lg-9" style="float:left;width:50%">
    <div style="width:100%"><h3>Search Results Summaries</h3></div>
        <div id = "results_orig" style="display:inline-block;width:32.8%;border: thin solid black;background-color:dodgerblue" onclick="toggleSearch(0,'results')"><h3>Original</h3></div>
        <div id = "results_derived" style="display:inline-block;width:32.8%;border: thin solid black" onclick="toggleSearch(1,'results')"><h3>Derived</h3></div>
        <div id = "results_related" style="display:inline-block;width:32.8%;border: thin solid black" onclick="toggleSearch(2,'results')"><h3>Related</h3></div>

        <div align="left"; style="width:100%height:700px;display:inline-block;border: thin solid black;float:none">
            <div id = "results_orig_set" align="left" style="display:inline-block;height:600px">
            <div id="modality_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >
                <!-- <canvas id="modality_chart"   ></canvas> -->
            </div>
                <div id="body_part_examined_chart" style="float:left;float:top display:inline-block;width:300px;height:300px" >
                <!-- <canvas id="body_part_examined_chart"  ></canvas> -->
                </div>


            </div>
            <div id = "results_derived_set" align="left" style="display:none;"></div>
            <div id = "results_related_set" align="left" style="display:none;">

                 <div id="disease_code_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >
                <!-- <canvas id="disease_code_chart"   ></canvas> -->
            </div>
                <div id="vital_statistics_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >
                <!-- <canvas id="vital_statistics_chart"  ></canvas> -->
                </div>
                <div id="gender_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >
                <!-- <canvas id="gender_chart"  ></canvas> -->
                </div>
                <div id="age_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >
                <!-- <canvas id="gender_chart"  ></canvas> -->
                </div>
                <!--
                <div id="bmi_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >

                </div> -->

                <div id="race_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >
                <!-- <canvas id="race_chart"  ></canvas> -->
                </div>

                <div id="ethnicity_chart" style="float:left;float:top display:inline-block;width:300px;height:200px" >
                <!-- <canvas id="ethnicity_chart"  ></canvas> -->
                </div>

                    <!-- <div id="disease_code_plot" style="display-inline" ></div>
                <div id="vital_statistics_plot"></div> -->
               <!-- //style="width:A100%;display:inline-block;overflow-y:auto;overflow-x:auto" -->

            </div>

        </div>



    </div>

    </div>
    <div>

    <!-- fields = ["project_short_name", "case_barcode", "race", "vital_status", "ethnicity", "bmi", "age_at_diagnosis", "gender", "disease_code",
               "StudyInstanceUID", "StudyDescription", "StudyDate", "SeriesInstanceUID", "SeriesDescription", "SeriesNumber", "BodyPartExamined", "Modality"] -->
    <table id="projects_table">
        <tr>
        <th><th>Project Name</th><th>Description</th><th>Total # of Patients</th><th># of Patients(this cohort)</th>

        </tr>
    </table>
       <br><br>
    <table id="studies_table">
        <tr>
        <th>Project Name</th><th>Patient Id</th><th>Study Id</th><th>Study Description</th><th>Study Date</th>

        </tr>
    </table>
     <br><br>
    <table id="series_table">
        <tr>
        <th>Study Id</th><th>Series Id</th><th>Series Number</th><th>Modality</th><th>Body Part Examined</th>

        </tr>
    </table>


    </div>






{% endblock %}

{% block js_file %}{% static 'js/dashboard.js' %}{% endblock %}